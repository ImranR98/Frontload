<div *ngIf="me">
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title">{{me.email}}</h5>
            <div class="d-grid gap-2 d-md-block">
                <div class="btn-group">
                    <button type="button" class="btn btn-outline-primary" routerLink="/change-email"
                        [disabled]="loading">Change
                        Email</button>
                    <button type="button" class="btn btn-outline-primary" routerLink="/change-password"
                        [disabled]="loading">Change
                        Password</button>
                </div>
            </div>
        </div>
    </div>
    <div class="card card-body">
        <div class="d-grid gap-2 d-md-block">
            <button type="button" class="btn btn-outline-primary" (click)="collapse.toggle()"
                [attr.aria-expanded]="!isCollapsed" aria-controls="collapseExample">
                {{isCollapsed ? 'Show' : 'Hide'}} Logged In Devices
            </button>
        </div>
        <div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsed">
            <div *ngFor="let login of me?.refreshTokens">
                <hr>
                <div class="row justify-content-between align-items-center">
                    <div class="col-auto">
                        <h5 class="card-title">{{formatUAString(login.userAgent)}}</h5>
                        <h6 class="card-subtitle mb-2 text-muted">{{login.date | date: 'medium' }}</h6>
                    </div>
                    <div class="col-auto">
                        <button type="button" class="btn btn-danger" (click)="revokeLogin(login._id)"
                            [disabled]="loading">Revoke
                            Login</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<p *ngIf="!me">
    <ngb-progressbar [value]="100" [striped]="true" [animated]="true"></ngb-progressbar>
</p>